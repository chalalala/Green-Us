<!DOCTYPE>
<html>
	<head>
		<title>GreenUs</title>
		<link href="css/info.css" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=ABeeZee&display=swap" rel="stylesheet">
	</head>
	
	<body>
		<!-- Panel -->
		<div id="panel">
			<div class="icon"><a href="profile.html" target="_blank"><img src="images/avatar.jpg"></a></div>
			<div class="icon"><a href="main_page.html"><img src="images/icons/garden.png"></a></div>
			<div class="icon"><a href="dictionary.html"><img src="images/icons/dictionary.png"></a></div>
			<div class="icon"><a href="weather.html"><img src="images/icons/weather.png"></a></div>
		</div>
		
		<!-- Image -->
		<div id="photo"><img src="images/Alstroemeria.jpg"></div>
		
		<!-- Info Box -->
		<div id="info">
			<!-- Name -->
			<div id="common_name">Peruvian Lilies</div>
			
			<!-- Info -->
			<div class="feature">
				<div class="feature_names">Other name(s):</div>
				<div id="name">Alstroemeria</div>
			</div>
			
			<div class="feature">
				<div class="feature_names">Type:</div>
				<div id="type">Herb/Forb</div>
			</div>
			
			<div class="feature">
				<div class="feature_names">Difficulty:</div>
				<div id="difficulty">Easy</div>
			</div>
			
			<div class="feature">
				<div class="feature_names">Planting time:</div>
				<div id="plant_time">Spring, Autumn</div>
			</div>
			
			<div class="feature">
				<div class="feature_names">Meaning:</div>
				<div id="meaning">Alstroemeria flower is symbolic of wealth prosperity and fortune. It is also the flower of friendship</div>
			</div>
		</div>
	
		<a href="info-2.html"><img src="images/down-arrow.png" id="down_arrow"></a>
		
		<!-- Feedback -->
		<img src="images/feedback.png" id="feedback_icon" onclick="open_modal('feedback_modal')">
		
		<div id="feedback_modal" class="modal">
		
			<div class="modal-content">
				<span class="close">&times;</span>
				<h2>Give us your feedback!</h2>
				
				<form name="submit-to-google-sheet">
					<textarea id="feedback_content" name="feedback" rows="10" cols="50" maxlength="500"></textarea>
					<button id="submit_btn" type="submit">Send</button>
				</form>
				<p id="response" style="display:none;font-size=20px;">Thanks for your feedback!</p>
		  	</div>
		
		</div>
		
		<script src="https://wzrd.in/standalone/formdata-polyfill"></script>
		<script src="https://wzrd.in/standalone/promise-polyfill@latest"></script>
		<script src="https://wzrd.in/standalone/whatwg-fetch@latest"></script>
		
		<script>
			  const scriptURL = 'https://script.google.com/macros/s/AKfycbwbfn2-Z-aZKOMsObksH-9cCG7CwAlMpOUFcn-Dv1VCAQc1arE6/exec'
			  const form = document.forms['submit-to-google-sheet']

			  form.addEventListener('submit', e => {
				e.preventDefault()
				display_response();
				fetch(scriptURL, { method: 'POST', body: new FormData(form)})
				  .then(response => console.log('Success!', response))
				  .catch(error => console.error('Error!', error.message))
			  })
			  
			var content = document.getElementById("feedback_content")
			var button = document.getElementById("submit_btn")
			
			function display_response(){
				form.style.display = "none";
				response.style.display = "block";
			}
			
			function open_modal(modal_id){
				var modal = document.getElementById(modal_id);
				var span = document.getElementsByClassName("close")[0]; // Get the <span> element that closes the modal

				// Open the modal when clicked
				modal.style.display = "block";

				// When the user clicks on <span> (x), close the modal
				span.onclick = function() {
					modal.style.display = "none";
				}

				// When the user clicks anywhere outside of the modal, close it
				window.onclick = function(event) {
					if (event.target == modal) {
						modal.style.display = "none";
					}
				}
			}
		</script>
	</body>
</html>