<!DOCTYPE>
<html>
	<head>
		<title>GreenUs</title>
		<link href="css/profile.css" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Darker+Grotesque&display=swap" rel="stylesheet">
	</head>
	
	<body>
		<div id="panel">
			<div class="icon"><a href="profile.html" target="_blank"><img src="images/avatar.jpg"></a></div>
			<div class="icon"><a href="main_page.html"><img src="images/icons/garden.png"></a></div>
			<div class="icon"><a href="dictionary.html"><img src="images/icons/dictionary.png"></a></div>
			<div class="icon"><a href="weather.html"><img src="images/icons/weather.png"></a></div>
		</div>
		
		<div id="left_panel">
			<img src="images/avatar.jpg" id="avatar">
			<div id="name">MAI DOAN</div>
			<div id="email">maidt.bi9162@st.usth.edu.vn</div>
			<a href="index.html" id="logout">Logout</a>
		</div>
		
		<div id="right_panel">
			<div class="box">
				<div class="title">Information</div>
				
				<!-- Info -->
				<div class="feature">
					<div class="cat">Member Since:</div>
					<div class="cat">Level:</div>
					<div class="cat">No. plants:</div>
				</div>
				
				<!-- Detail -->
				<div class="detail">
					<div class="info memtime">20/03/2020</div>
					
					<div class="info level">Beginner</div>
					
					<div class="info noplants">1</div>
				</div>
			</div>
			
			<div class="box">
				<div class="title">Connect with friends</div>
				
				<!-- Info -->
				<div class="feature">
					<div class="cat">My ID:</div>
					<div class="cat">Link:</div>
					<div class="cat">Friend's ID:</div>
				</div>
				
				<!-- Detail -->
				<div class="detail">
					<div class="info id">ABC123456</div>
					<div class="info link">http://greenus.io/abc12..</div>
					<div class="info friends"><input type="text" placeholder="DEF654321" style="font-size:24px" id="friend_id"></div>
				</div>
			</div>
		</div>
		
		<!-- Feedback -->
		<img src="images/feedback.png" id="feedback_icon" onclick="open_modal('feedback_modal')">
		
		<div id="feedback_modal" class="modal">
		
			<div class="modal-content">
				<span class="close">&times;</span>
				<h2>Give us your feedback!</h2>
				
				<form name="submit-to-google-sheet">
					<textarea id="feedback_content" name="feedback" rows="10" cols="50" maxlength="500"></textarea>
					<button id="submit_btn" type="submit">Send</button>
				</form>
				<p id="response" style="display:none;font-size=20px;">Thanks for your feedback!</p>
		  	</div>
		
		</div>
		
		<script src="https://wzrd.in/standalone/formdata-polyfill"></script>
		<script src="https://wzrd.in/standalone/promise-polyfill@latest"></script>
		<script src="https://wzrd.in/standalone/whatwg-fetch@latest"></script>
		
		<script>
			  const scriptURL = 'https://script.google.com/macros/s/AKfycbwbfn2-Z-aZKOMsObksH-9cCG7CwAlMpOUFcn-Dv1VCAQc1arE6/exec'
			  const form = document.forms['submit-to-google-sheet']

			  form.addEventListener('submit', e => {
				e.preventDefault()
				display_response();
				fetch(scriptURL, { method: 'POST', body: new FormData(form)})
				  .then(response => console.log('Success!', response))
				  .catch(error => console.error('Error!', error.message))
			  })
			  
			var content = document.getElementById("feedback_content")
			var button = document.getElementById("submit_btn")
			
			function display_response(){
				form.style.display = "none";
				response.style.display = "block";
			}
			
			function open_modal(modal_id){
				var modal = document.getElementById(modal_id);
				var span = document.getElementsByClassName("close")[0]; // Get the <span> element that closes the modal

				// Open the modal when clicked
				modal.style.display = "block";

				// When the user clicks on <span> (x), close the modal
				span.onclick = function() {
					modal.style.display = "none";
				}

				// When the user clicks anywhere outside of the modal, close it
				window.onclick = function(event) {
					if (event.target == modal) {
						modal.style.display = "none";
					}
				}
			}
		</script>
	</body>
</html>