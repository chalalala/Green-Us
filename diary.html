<!DOCTYPE html>
<html>
	<head>
		<title>GreenUs</title>
		<link href="css/diary.css" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=ABeeZee&display=swap" rel="stylesheet">
	</head>
	
	<body>
		<!-- Back Arrow -->
		<a href="info_plant.html"><img src="images/left-arrow.png" width="50px" style="margin:10px;position:absolute;"></a>
		
		<!-- Info Box -->
		<div id="header">
			<h1>Plant's Diary</h1>
		</div>
		
		<!-- Part of diary -->
		<div id="diary">
			<p>So litte</p>
			<hr size="1px" width="96%" align="center" color="#610000" noshade>
			<p>I wanna sleep</p>
			<hr size="1px" width="96%" align="center" color="#610000" noshade>
			<p>Wait, this is for plant, not me</p>
			<hr size="1px" width="96%" align="center" color="#610000" noshade>
			<p>Whatever</p>
			<hr size="1px" width="96%" align="center" color="#610000" noshade>
			<p>Whatever</p>
		</div>
		
		<!-- Feedback -->
		<img src="images/feedback.png" id="feedback_icon" onclick="open_modal('feedback_modal')">
		
		<div id="feedback_modal" class="modal">
		
			<div class="modal-content">
				<span class="close">&times;</span>
				<h2>Give us your feedback!</h2>
				
				<form name="submit-to-google-sheet">
					<textarea id="feedback_content" name="feedback" rows="10" cols="50" maxlength="500"></textarea>
					<button id="submit_btn" type="submit">Send</button>
				</form>
				<p id="response" style="display:none;font-size=20px;">Thanks for your feedback!</p>
		  	</div>
		
		</div>
		
		<script src="https://wzrd.in/standalone/formdata-polyfill"></script>
		<script src="https://wzrd.in/standalone/promise-polyfill@latest"></script>
		<script src="https://wzrd.in/standalone/whatwg-fetch@latest"></script>
		
		<script>
			  const scriptURL = 'https://script.google.com/macros/s/AKfycbwbfn2-Z-aZKOMsObksH-9cCG7CwAlMpOUFcn-Dv1VCAQc1arE6/exec'
			  const form = document.forms['submit-to-google-sheet']

			  form.addEventListener('submit', e => {
				e.preventDefault()
				display_response();
				fetch(scriptURL, { method: 'POST', body: new FormData(form)})
				  .then(response => console.log('Success!', response))
				  .catch(error => console.error('Error!', error.message))
			  })
			  
			var content = document.getElementById("feedback_content")
			var button = document.getElementById("submit_btn")
			
			function display_response(){
				form.style.display = "none";
				response.style.display = "block";
			}
			
			function open_modal(modal_id){
				var modal = document.getElementById(modal_id);
				var span = document.getElementsByClassName("close")[0]; // Get the <span> element that closes the modal

				// Open the modal when clicked
				modal.style.display = "block";

				// When the user clicks on <span> (x), close the modal
				span.onclick = function() {
					modal.style.display = "none";
				}

				// When the user clicks anywhere outside of the modal, close it
				window.onclick = function(event) {
					if (event.target == modal) {
						modal.style.display = "none";
					}
				}
			}
		</script>
	</body>
</html>